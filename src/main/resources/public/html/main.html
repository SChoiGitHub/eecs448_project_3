<html>
    <head>
        <title>Doug's Book</title>
        <link href="../css/page_layout.css" type="text/css" rel="stylesheet">
        <link href="../css/main.css" type="text/css" rel="stylesheet">
    </head>
    <body>
        <header>Doug's Book</header>
	<nav>
            <!-- header buttons -->
            <script>
                //get this variable's value from server
                let somebool = true;
                if(somebool == true) {
                    let adminButton = document.createElement("a");
		    let adminText = document.createTextNode("Admin Mode");
		    adminButton.appendChild(adminText);

		    adminButton.classname = 'adminButton';
		    adminButton.setAttribute('href', 'admin.html');

		    let nav = document.getElementsByTagName('nav')[0];
		    nav.appendChild(adminButton);
                }
            </script>
	    <a href="account.html">My Account</a>
	    <a href="main.html">Home</a>
	</nav>

	<div id="page">
	    <div class="forumbuttons">
		<button type="button" onclick="post.html">Create Post</button>
	    </div>

	    <div id="forumTable" class="forumTable">
		<table>
		    <thead>
			<tr>
			    <th class="titles">Post</th>
			    <th class="replies">Replies</th>
			</tr>
		    </thead>
		    <tbody>
			<tr class="odd">
			    <td class="mainpostinfo">
				<div class="posttitle">
				    Post title
				</div>
				<div class="postauthor">
				    Post author
				</div>
			    </td>
			    <td class="replies">
				32
			    </td>
			</tr>
			<tr class="even">
			    <td class="mainpostinfo">
				<div class="posttitle">
				    Post title
				</div>
				<div class="postauthor">
				    Post Author
				</div>
			    </td>
			    <td class="replies">
				28
			    </td>
			</tr>
		    </tbody>
		</table>
		<script>
/*
		    let postT = "Some Title";
		    let postA = "Author";
		    let postR = 0;
		    let postID = 0;

		    
		    
		    //get posts from server

		    //transfer posts data to a JS array of arrays of strings and numbers
		    //For ex.
		    //posts = [IDs = ['1234', '6543', '8630', ...], titles = ['title1', 'title2', ...], authors = ['author1', 'author2', ...], replies = [1, 213, 33, ...]]
		    //for testing, create some dummy arrays
		    let IDs = ["0", "123", "333"];
		    let titles = ["What's the point?", "This is an empty post", "Aaaaaughibbrgubugbugrguburgle!"];
		    let authors = ["AcePilot", "Null", "Murloc123"];
		    let replies = [2, 0, 18359];
		    let posts = [IDs, titles, authors, replies];
		    
		    function createList (posts) {
			let postList = document.createElement("ur");

			for(let i = 0; i < posts[0].length; i++) {
			    let post = document.createElement("li");

			    postT = posts[1][i];
			    postA = posts[2][i];
			    postR = posts[3][i];
			    postID = posts[0][i];

			    let _postT = document.createElement("a");
			    let _postA = document.createElement("a");
			    let _postR = document.createElement("a");

			    let attT = document.createAttribute("postT");//the class of post title
			    let attA = document.createAttribute("postA");//the class of post author
			    let attR = document.createAttribute("postR");//the class of post replies

			    _postT.innerHTML = postT;
			    _postA.innerHTML = postA;

			    let replyStr = "";
			    if(postR > 1) {
				replyStr = postR + " Replies";
			    } else {
				replyStr = postR + " Reply";
			    }
			    _postR.value = replyStr;

			    _postT.onclick = function() {window.location.href="post_page/" + postID + ".html"};//go to post detail page
			    _postA.onclick = function() {window.location.href="user/" + postA + ".html"};//go to user detail page
			    _postR.onclick = function() {window.location.href="post_page/" + postID + ".html"};
			    
			    _postT.setAttributeNode(attT);
			    _postA.setAttributeNode(attA);
			    _postR.setAttributeNode(attR);
			    
			    let att = document.createAttribute("post"); //the class of each post
			    post.setAttributeNode(att);  

			    post.appendChild(_postT);
			    post.appendChild(_postA);
			    post.appendChild(_postR);

			    postList.appendChild(post);
			}
			document.body.appendChild(postList);
		    }
		    
		    createList(posts);

		*/
		</script>
	    </div>
	</div>
    </body>
</html>
